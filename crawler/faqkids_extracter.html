<html>
	<head>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.1/jquery.min.js"></script>
	</head>
	<body>
		<p>
			<script type="text/javascript">
				main();
				function main() {
					var QA = [];
					var headURLs = [
					{ "category" : "animal", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/animals%22%20and%20xpath='//*[@id=%22centerCol%22]/div[4]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "birds", 
					"url" :	"http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/birds%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "bugs & insects", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/bugs-insects%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "cats & dogs", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/cats-dogs%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"}, 
					{ "category" : "art", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/art%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "food", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/food%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "history", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/history%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "math", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/math%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "myths & legends", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/myths-legends%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "outer space", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/outer-space%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "people & culture", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/people-culture%22%20and%20xpath='//*[@id=%22centerCol%22]/div[4]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "language & phrases", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/language-phrases%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "places", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/places%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "science", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/science%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "sports", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/sports%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "technology", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/technology%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "earth", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/earth%22%20and%20xpath='//*[@id=%22centerCol%22]/div[4]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "ocean", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/ocean%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "weather", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/weather%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "human body", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/human-body%22%20and%20xpath='//*[@id=%22centerCol%22]/div[4]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "gross stuff", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/gross-stuff%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "growing up", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/growing-up%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "hands feet", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/hands-feet%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "your skin", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/your-skin%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "your health", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/your-health%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "time dates", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/time-dates%22%20and%20xpath='//*[@id=%22centerCol%22]/div[4]/div/div[*]/div[2]/h4/a'&format=json"},
					{ "category" : "holidays", 
					"url" : "http://query.yahooapis.com/v1/public/yql?q=select%20href%20from%20html%20where%20url=%22http://www.faqkids.com/holidays%22%20and%20xpath='//*[@id=%22centerCol%22]/div[3]/div/div[*]/div[2]/h4/a'&format=json"}
					];
					for (var j = 0, length = headURLs.length; j < length; j++){
						populateQA(headURLs, QA, j);
					}
					setTimeout(function(){
						$("p").html(JSON.stringify(QA));
							}, 60000);
				}

				function populateQA(headURLs, QA, j) {
					$.ajax({
						url: headURLs[j].url,
						data: null,
						async: false,
						success: function(data, status) {
							var qLinks = [];
							while (data === undefined)
							{
								setTimeout(function(){}, 200);
							}
							qLinks = data.query.results.a;
							QA.push({"category" : headURLs[j].category, "data" :[]});
							for (var i = 0, len = qLinks.length; i < len; ++i) {
								populateQAContent(qLinks, QA, i, j); 
							}
						},
						error: function(msg){
							console.log(msg);
						},
						dataType: "jsonp"
					});
				}

				function populateQAContent(qLinks, QA, i, j, q) {
					var qLink = "http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url=%22 " + qLinks[i].href + "%22%20and%20xpath='//*[@id=%22wContent%22]/div/div/div[1]/div[2]'&format=json";
					var q = "QQQ";
					var a = "AAA";
					var obj = {};
					$.ajax({
						url: qLink,
						async: false,
						data: null,
						success: function(data, status){
							while (data === undefined)
							{
								setTimeout(function(){}, 200);
							}
							q = data.query.results.div.p;
							obj.question = q;
						},
						error: function(msg){
							console.log(msg);
						},
						dataType: "jsonp"
					});

					setTimeout(function(){}, 500);

					var index = qLinks[i].href.indexOf("-");
					var qaid = qLinks[i].href.substring(23, index);
					var aLink = "http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url=%22 " + qLinks[i].href + "%22%20and%20xpath='//*[@id=%22post-" + qaid + "%22]/div/div[2]/p'&format=json";
					$.ajax({
						url: aLink,
						async: false,
						data: null,
						success: function(data, status){
							while (data === undefined)
							{
								setTimeout(function(){}, 200);
							}
							a = data.query.results.p;
							obj.answer = a;
							// todo: there is a bug because of which q's value is not read correctly
							QA[j].data.push(obj/*{ "question" : q, "answer" : a }*/);
						},
						error: function(msg){
							console.log(msg);
						},
						dataType: "jsonp"
					});
				}

			</script>
		</p>
	</body>
</html>

